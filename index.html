<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="js/react.js"></script>
    <script src="js/JSXTransformer.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css">
  </head>
  <body>
    <div id="canvas"></div>

    <script type="text/jsx">
        var SizeForm = React.createClass({
            render: function() {
                return <div><label>Сп:</label><input type='text' /></div>;
            }
        });

        var Graphic = React.createClass({ 

          componentDidMount: function() {
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');

            this.paint(context);
          },

          componentDidUpdate: function() {
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');
            context.clearRect(0, 0, 200, 200);
            this.paint(context);
          },

          paint: function(context) {
            context.save();
            context.strokeStyle = '#ff0000';
            context.lineWidth = 3;
            context.beginPath();
            context.moveTo(5, 5);
            context.lineTo(450, 5);
            context.stroke();
          },

          render: function() {
            return ( 
                <div className='canvas-bg'>
                    <canvas id='canvas' width={200} height={200} />
                </div>
            );
          }

        });

        var App = React.createClass({

          getInitialState: function() {
            return { rotation: 0 };
          },

          componentDidMount: function() {
            requestAnimationFrame(this.tick);
          },

          tick: function() {
            this.setState({ rotation: this.state.rotation + .01 });
            requestAnimationFrame(this.tick);
          },

          render: function() {
            return (
                <div>
                    <div><SizeForm /></div>
                    <div><Graphic /></div>
                </div>
            );
          }

        });

        React.render(<App />, document.body);
    </script>
  </body>
</html>